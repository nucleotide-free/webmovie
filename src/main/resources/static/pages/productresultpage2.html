<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>可视化展示</title>
    <script type="text/javascript" src="./js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="./js/echarts.min.js"></script>
</head>
<body>

    <h1>2-各年份电影数量</h1>
    <div id="chart-2-num-bar" style="width: 1300px;height: 600px"></div>
    <script type="text/javascript">

        var chartDom = document.getElementById('chart-2-num-bar');
        var myChart = echarts.init(chartDom);

        $.getJSON("./queryMovieYearNum",function(values){

            var xAxis = ['1900年前']
            var yAxis = [0]
            for(var i =1901 ;i<2021;i += 10){
                var str = i.toString() + "-" + (i+9).toString()
                xAxis.push(str)
                yAxis.push(0)
            }
            for(var i=0;i<values.data.length;i++){
                var year = parseInt(values.data[i]['year'])
                var num = values.data[i]['num']
                if(year < 1900){
                    yAxis[0] += num
                }else{
                    yAxis[(year-1901)/10+1] += num
                    // xAxis.push(year.toString())
                    // yAxis.push(num)
                }
            }
            var option;

            option = {
                xAxis: {
                    type: 'category',
                    axisLabel: {
                        interval:0,
                        // rotate:40
                    },
                    data: xAxis
                },
                yAxis: {
                    type: 'value'
                },

                series: [
                    {
                        data: yAxis,
                        type: 'bar'
                    }
                ]
            };
            myChart.setOption(option);
    })
</script>


</body>
</html>